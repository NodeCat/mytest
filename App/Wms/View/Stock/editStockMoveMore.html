  <div class="table-responsive"> 
  <form class="form-horizontal" action="{:U('edit')}" method="post" id='form'>
   <div class="form-group">
      <label for="inputPassword" class="col-sm-2 control-label text-right">目的库位</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="inputPassword" placeholder="目的库位" name="dest_location_id">
      </div>
    </div>
    <hr/>
   <table id="data-table" class="data-table table table-bordered table-striped table-condensed table-hover tablesorter tablesorter-bootstrap" style="">
    <colgroup>
     <col style="width: 5%;" />
     <col style="width: 10%;" />
     <col style="width: 20%;" />
     <col style="width: 20%;" />
     <col style="width: 10%;" />
     <col style="width: 10%;" />
     <col style="width: 10%;" />
     <col style="width: 4.6%;" />
     <col style="width: 20%;" />
     <col style="width: 4.6%;" />
    </colgroup> 
    <thead> 
     <tr class="text-center tablesorter-headerRow"> 
      <th data-column="0" class="tablesorter-header sorter-false bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner"> 
         序列
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
         <i class=""></i>
        </div>
       </div></th> 
      <th id="wh_name" data-column="1" class="tablesorter-header bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner">
         产品编号 
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
        </div>
       </div></th>
      <th id="area" data-column="2" class="tablesorter-header bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner">
         产品名称 
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
        </div>
       </div></th>
      <th id="pro_code" data-column="3" class="tablesorter-header bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner">
         批次 
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
        </div>
       </div></th>
      <th id="pro_name" data-column="4" class="tablesorter-header bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner">
         库位 
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
        </div>
       </div></th>
      <th id="location_code" data-column="5" class="tablesorter-header bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner">
         在库存量 
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
        </div>
       </div></th>
       <th id="location_code" data-column="5" class="tablesorter-header bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner">
         分配量 
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
        </div>
       </div></th>
       <th id="location_code" data-column="5" class="tablesorter-header bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner">
          可用量
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
        </div>
       </div></th>
       <th id="location_code" data-column="5" class="tablesorter-header bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner">
         移动量 
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
        </div>
       </div></th>
       <th id="location_code" data-column="5" class="tablesorter-header bootstrap-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;">
       <div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%">
        <div class="tablesorter-header-inner">
         操作 
         <i class="tablesorter-icon bootstrap-icon-unsorted"></i>
        </div>
       </div></th>
     </tr> 
    </thead> 
    <tbody> 
    <volist name="data" id="vo" key="k">
     <tr class="list_info_all" id="tr_{$k}">
      <td>{$k}</td>
      <td>{$vo.pro_code}</td> 
      <td>{$vo.pro_name}</td>
      <td>{$vo.batch}</td>
      <td>{$vo.location_code}</td>
      <td>{$vo.stock_qty}</td>
      <td>{$vo.assign_qty}</td> 
      <td>{$vo.avaliable_qty}</td>
      <td><input type='text' name='stock_qty[]' data-value="{$vo.avaliable_qty}" attr='out_qty' class='form-control input-sm text-left' value="{$vo.avaliable_qty}"></td>
      <td>
        <a data-href="/Category/delete.htm" class="btn btn-xs btn-delete" data-title="" rel="tooltip" data-toggle="tooltip" data-trigger="hover" data-rel='delOne' data-value='{$k}' data-placement="bottom" data-original-title="" title=""><i class="glyphicon glyphicon-trash"></i>
        </a>
      </td>

      <input type='hidden' value='{$vo.id}' name='stock_id[]'/>
      <input type='hidden' value='{$vo.stock_qty}' name='origin_stock_qty[]'/>
      <input type='hidden' value='{$vo.assign_qty}' name='assign_qty[]'/>
      <input type='hidden' value='{$vo.avaliable_qty}' name='avaliable_qty[]'/>
      <input type='hidden' value='{$k}' name='stock_key[]'/>
      <input type="hidden" name="wh_id[]" value="{$vo.wh_id}"/>
      <input type="hidden" name="src_location_id[]" value="{$vo.location_id}"/>
      <input type="hidden" name="pro_code[]" value="{$vo.pro_code}"/>
      <input type="hidden" name="batch[]" value="{$vo.batch}"/>
      <input type="hidden" name="status[]" value="{$vo.status}"/>  
     </tr>

    </volist>
    <input type="hidden" name="editStockMove" value="1"/>
    </tbody> 
   </table> 
  </form>
  </div> 
  
  <!-- <include file="Index:pager"/> -->
  <style type="text/css">
  .table-operate-btn{
    word-wrap:keep-all;
    white-space: nowrap;
  }
</style> 
  <script src="/Public/tablesorter/js/jquery.tablesorter.js"></script> 
  <script src="/Public/tablesorter/js/jquery.tablesorter.widgets.js"></script> 
  <script src="/Public/js/light-table-filter.min.js"></script> 
  <script type="text/javascript">
$(function() {
  $.extend($.tablesorter.themes.bootstrap, {
    // these classes are added to the table. To see other table classes available,
    // look here: http://twitter.github.com/bootstrap/base-css.html#tables
    table      : 'table table-bordered',
    caption    : 'caption',
    header     : 'bootstrap-header', // give the header a gradient background
    footerRow  : '',
    footerCells: '',
    icons      : '', // add "icon-white" to make them white; this icon class is added to the <i> in the header
    sortNone   : 'bootstrap-icon-unsorted',
    sortAsc    : 'icon-chevron-up glyphicon glyphicon-chevron-up',     // includes classes for Bootstrap v2 & v3
    sortDesc   : 'icon-chevron-down glyphicon glyphicon-chevron-down', // includes classes for Bootstrap v2 & v3
    active     : '', // applied when column is sorted
    hover      : '', // use custom css here - bootstrap class may not override it
    filterRow  : '', // filter row class
    even       : '', // odd row zebra striping
    odd        : ''  // even row zebra striping
  });
});
</script> 
  <script type="text/javascript">
$(function() {
  $(".table").tablesorter({
    theme : "bootstrap",
    headers: {
          0: {sorter: false},
      },
    widthFixed: true,
    headerTemplate : '{content} {icon}', // new in v2.7. Needed to add the bootstrap icon!
    widgets : [ "uitheme",  "zebra" ],
  });
});
</script> 


<script type="text/javascript">

$(function(){
  var jsObj = {

          'checkAll':function(){

            var aInput = $('table tbody input[type=checkbox]');

            var arr = [];

            aInput.each(function(i){

              var inputVal = aInput.eq(i).val();

              if(aInput.eq(i).prop("checked")){

                arr.push(inputVal);

              }

            });

            return arr;

          },

          'chilChecked':function(vb){

            var isAll = $(vb).prop('checked');

            var aInput = $('table tbody input[type=checkbox]');

            aInput.each(function(i){

              aInput.eq(i).prop('checked',isAll);

            });

          },

          'chilCheckClick':function(){

            var _this = this;

            $(document).on('click','table tbody input[type=checkbox]',function(){

              var isFalse = _this.isNotChilCkecked();

              $("#inlineCheckboxAll").prop('checked',isFalse);

            });

          },
          'isNotChilCkecked':function(){

            var aInput = $('table tbody input[type=checkbox]');

            var isFalse = true;

            aInput.each(function(i){

              if(!aInput.eq(i).prop('checked')) isFalse = false;
            
            });

            return isFalse;

          },
          'checkboxAll':function(){

            var _this = this;

            $(document).on('click','#inlineCheckboxAll',function(){

              _this.chilChecked(this);

            });

          },

          'dellAll':function(){

            var _this = this;

            $(document).on('click','[data-rel = all]',function(){

                var allVal = _this.checkAll();

                var len = allVal.length;

                _this.delConstroller(len,allVal);


            });

          },
          'delConstroller':function(len,allVal){

            if(parseInt(len,10)>0){

                  if(confirm('你确定要删除这'+len+"行数据！")){
                    for(var i=0;i<len;i++){
                      $("#tr_"+allVal[i]).remove();
                    }
                  }

                }else{

                  alert('请选择要删除数据！');

                }
          },
          'deleteOne':function(){

            var _this = this;

            $('[data-rel = delOne]').unbind('click').click(function(){

                var allVal = [];

                var oneTr = $(this).attr('data-value');
                
                allVal.push(oneTr);

                var len = allVal.length;

                _this.delConstroller(len,allVal);


            });

          },
          'post':function(url,param,callBack){

            $.post(url,param,callBack,'json');

          }
    };
  $('[attr = out_qty]').unbind('blur').blur(function(){
    var out_qty = parseFloat($(this).val());
    var reg = /^[0-9]*(\.[0-9]{1,2})?$/;
    if (!reg.test(out_qty)){
      alert('移动量只能精确到小数点两位');
      $(this).val(pro_qty);
    }
    var pro_qty = $(this).attr('data-value');
    if(out_qty>parseFloat(pro_qty)){
      alert('移动量不可大于可用量');
      $(this).val(pro_qty);
    }
  });

  jsObj.deleteOne();

  /*jsObj.dellAll();

  jsObj.checkboxAll();//全部中

  jsObj.chilCheckClick();//子集选中*/

});

    
</script>